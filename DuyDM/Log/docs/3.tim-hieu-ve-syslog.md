# Tìm hiểu về syslog

## 1. Khái niệm

Syslog là một giao thức dùng để xử lý các file log trong các hệ điều hành Linux. Các file log có thể được lưu tại chính máy Linux đó, hoặc có thể di chuyển và lưu tại 1 máy khác.

Syslog là một giao thức `client/server` là giao thức dùng để chuyển log và thông điệp đến máy nhận log. Máy nhận log thường được gọi là syslogd, syslog daemon hoặc syslog server. Syslog có thể gửi qua UDP hoặc TCP. Các dữ liệu được gửi dạng cleartext. Syslog dùng port `514`.

Khi một máy Linux được cài lên, máy đó sẽ tự động sinh ra các file log mặc định, có thể hiểu thành phần quản lý việc sinh ra log đó chính là syslog.

## 2. Đặc điểm của syslog

- Defining an architecture (xác định kiến ​​trúc) : Syslog là một giao thức, nó là một phần của kiến ​​trúc mạng hoàn chỉnh, với nhiều client và server.

- Message format (định dạng tin nhắn) : syslog xác định cách định dạng message. Điều này rõ ràng cần phải được chuẩn hóa vì các bản ghi thường được phân tích cú pháp và lưu trữ vào các công cụ lưu trữ khác nhau. Nên cần xác định những gì một máy khách syslog có thể tạo ra và những gì một máy chủ nhật ký hệ thống có thể nhận được.

- Specifying reliability (chỉ định độ tin cậy) : syslog cần xác định cách xử lý các tin nhắn không thể gửi được. Là một phần của TCP/IP, syslog rõ ràng sẽ bị thay đổi trên giao thức mạng cơ bản (TCP hoặc UDP) để lựa chọn.

- Dealing with authentication or message authenticity (xử lý xác thực hoặc xác thực thư): syslog cần một cách đáng tin cậy để đảm bảo rằng máy client và server đang nói chuyện một cách an toàn và tin nhắn nhận được không bị thay đổi.

## 3. Syslog facility levels & Syslog severity levels

- `Facility levels` giúp kiểm soát log đến dựa vào nguồn gốc được quy định như từ ứng dụng hay tiến trình nào. Syslog sử dụng facility để quy hoạch lại log như vậy có thể coi faicility là đại diện cho đối tượng tạo ra thông báo (kernel, process, apps,..).

![](../images/tim-hieu-syslog/image1.png)

+ auth  : sử dụng cho những sự kiện bảo mật, các hoạt động đòi hỏi user/password (getty, su, login).

+ authpriv:  : các thông báo liên quan đến kiểm soát truy cập và bảo mật.

+ console: Used to capture messages that would generally be directed to the system console

+ cron: cron là một tiện ích cho phép thực hiện các tác vụ một cách tự động theo định kỳ, ở chế độ nền của hệ thống.

+ deamon: sử dụng bởi các tiến trình hệ thống và các daemons khác (daemon là một chương trình hoạt động liên tục. daemon khác với các ứng trình bình thường ở chỗ, các ứng trình bình thường dừng lại sau khi hoàn tất một (hoặc một chuỗi) thao tác.
+ kern: các thông báo từ kernel.

+ ftp : log liên quan đến dịch vụ ftp.

+ mail : log liên quan đến hệ thống mail.

+ lpr  : các thông báo từ kernel.

+ mark : những thông báo được generated bởi bản thân syslogd.

+ news : hệ thống tin tức, liên quan đến giao thức Network News Protocol (nntp).

+ syslog  : những thông báo được generated bởi bản thân syslogd.

+ user : thông báo về tiến trình người dùng thông thường.

+ uucp : hệ thống con UUCP. Unix-to-Unix là một tập hợp các chương trình mức thấp cho phép kết nối các máy UNIX với nhau.

+ local0 to local7  : dự trữ cho sử dụng nội bộ



## 4. Cơ chế rotate của log

## 5. Đặc điểm của bản tin log trong linux

## 6. Cách hoạt động của giao thức syslog

